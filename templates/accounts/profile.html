{% extends 'base.html' %}
{% block title %}My Profile{% endblock %}

{% block content %}
<h2>Welcome, {{ user.full_name }}!</h2>

{% if user.photo %}
  <img src="{{ user.photo.url }}" width="150" height="150" class="img-thumbnail mb-3">
{% else %}
  <p>No photo uploaded yet.</p>
{% endif %}

<ul class="list-group">
    <li class="list-group-item"><strong>Email:</strong> {{ user.email }}</li>

    {% if salary %}
        <li class="list-group-item">
            <strong>Gross Salary:</strong> 
            <span id="salary-text">*******</span>
            <button class="btn btn-sm btn-outline-primary" onclick="toggle('salary-text', '{{ salary.amount }}', this)">Show</button>
        </li>
        <li class="list-group-item">
            <strong>Current Loan:</strong> 
            <span id="loan-text">*******</span>
            <button class="btn btn-sm btn-outline-primary" onclick="toggle('loan-text', '{{ salary.loan }}', this)">Show</button>
        </li>
        <li class="list-group-item">
            <strong>Balance/{{ salary.payment_for }}:</strong> 
            <span id="balance-text">*******</span>
            <button class="btn btn-sm btn-outline-primary" onclick="toggle('balance-text', '{{ salary.balance }}', this)">Show</button>
        </li>
    {% else %}
        <li class="list-group-item"><em>No salary assigned yet.</em></li>
    {% endif %}

    <li class="list-group-item"><strong>Staff Role:</strong> {{ user.role }}</li>
    <li class="list-group-item"><strong>Address:</strong> {{ user.address }}</li>
    <li class="list-group-item"><strong>Next of Kin:</strong> {{ user.next_of_kin }}</li>
    <li class="list-group-item"><strong>Next of Kin phone number:</strong> {{ user.next_of_kin_contact }}</li>
</ul>

<!-- Script to toggle each item -->
<script>
    function toggle(spanId, realValue, btn) {
        const span = document.getElementById(spanId);
        if (span.innerText.trim() === '*******') {
            span.innerText = 'â‚¦' + realValue;
            btn.innerText = 'Hide';
        } else {
            span.innerText = '*******';
            btn.innerText = 'Show';
        }
    }
</script>
{% endblock %}
